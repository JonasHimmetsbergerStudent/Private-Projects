<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroid Shooter Bookmarklet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }

        h1,
        h2 {
            color: #333;
        }

        h1 {
            text-align: center;
        }

        .bookmarklet {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }

        .instructions {
            background-color: #f8f8f8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 20px 0;
        }

        .warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <h1>Asteroid Shooter Bookmarklet</h1>

    <div class="instructions">
        <h2>Anleitung:</h2>
        <ol>
            <li>Ziehe diesen Link in deine Lesezeichenleiste:
                <a class="bookmarklet"
                    href="javascript:(function(){function createBoostTrail(x,y,size,opacity){var trail=document.createElement('div');trail.className='as-boost-trail';trail.style.left=(x-size/2)+'px';trail.style.top=(y-size/2)+'px';trail.style.width=size+'px';trail.style.height=size+'px';trail.style.opacity=opacity;document.body.appendChild(trail);setTimeout(function(){if(trail.parentNode){trail.parentNode.removeChild(trail);}},500);}function getChargeColor(chargeLevel){if(chargeLevel<0.25){const blueAmount=Math.floor(255*(1-chargeLevel*4));const greenAmount=Math.floor(255*(chargeLevel*4));return'rgb(0, '+greenAmount+', '+blueAmount+')'}else if(chargeLevel<0.5){const adjustedLevel=(chargeLevel-0.25)*4;const redAmount=Math.floor(255*adjustedLevel);return'rgb('+redAmount+', 255, 0)'}else if(chargeLevel<0.75){const adjustedLevel=(chargeLevel-0.5)*4;const greenAmount=Math.floor(255*(1-adjustedLevel));return'rgb(255, '+greenAmount+', 0)'}else{const adjustedLevel=(chargeLevel-0.75)*4;const greenAmount=Math.floor(60*(1-adjustedLevel));return'rgb(255, '+greenAmount+', 0)'}}var s=document.createElement('style');s.innerHTML='#as-game{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;pointer-events:none}.as-destroyed{opacity:0!important;transition:opacity 0.5s}.as-split-container{position:absolute;overflow:hidden;z-index:10000;pointer-events:none}.as-split-left{transition:transform 500ms ease-in,opacity 500ms}.as-split-right{transition:transform 500ms ease-in,opacity 500ms}.as-laser{position:fixed;background:#ff5555;border-radius:2px;box-shadow:0 0 8px #ff0000;transform-origin:top center;pointer-events:none;z-index:10000}.enemy-laser{background:#e74c3c !important}.as-laser-impact{position:fixed;background:radial-gradient(circle,rgba(255,255,255,1) 0%,rgba(255,85,85,1) 70%,rgba(255,0,0,0) 100%);width:20px;height:20px;border-radius:50%;pointer-events:none;z-index:10001;animation:impact 0.3s forwards}@keyframes impact{0%{transform:scale(0.5);opacity:1}100%{transform:scale(1.5);opacity:0}} .charged-laser{animation:pulse 0.5s infinite alternate} @keyframes pulse{0%{opacity:0.7}100%{opacity:1}} .rainbow-laser{animation:rainbow-pulse 0.5s infinite alternate} @keyframes rainbow-pulse{0%{opacity:0.7;box-shadow:0 0 15px red}20%{box-shadow:0 0 20px orange}40%{box-shadow:0 0 25px yellow}60%{box-shadow:0 0 25px green}80%{box-shadow:0 0 20px blue}100%{opacity:1;box-shadow:0 0 15px violet}} .charge-indicator{position:fixed;border-radius:50%;pointer-events:none;z-index:9998;animation:charge-pulse 0.5s infinite alternate}@keyframes charge-pulse{0%{opacity:0.3}100%{opacity:0.7}} .rainbow-charge{animation:rainbow-charge 0.5s infinite alternate}@keyframes rainbow-charge{0%{opacity:0.7;background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,0,0,0.7) 70%, rgba(255,0,0,0) 100%)}16%{background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,127,0,0.7) 70%, rgba(255,127,0,0) 100%)}33%{background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,0,0.7) 70%, rgba(255,255,0,0) 100%)}50%{background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(0,255,0,0.7) 70%, rgba(0,255,0,0) 100%)}66%{background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(0,0,255,0.7) 70%, rgba(0,0,255,0) 100%)}83%{background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(75,0,130,0.7) 70%, rgba(75,0,130,0) 100%)}100%{opacity:0.9;background:radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(143,0,255,0.7) 70%, rgba(143,0,255,0) 100%)}} @keyframes ship-knockback{0%{transform:scale(1)}25%{transform:scale(1.15)}100%{transform:scale(1)}} .as-enemy{animation:enemy-pulse 1.5s infinite alternate} @keyframes enemy-pulse{0%{box-shadow:0 0 5px #ff0000}100%{box-shadow:0 0 15px #ff0000}} .as-token{position:fixed;width:15px;height:15px;background-color:#FFD700;border-radius:50%;pointer-events:none;z-index:9998;box-shadow:0 0 8px #FFFF00;animation:token-pulse 1s infinite alternate}@keyframes token-pulse{0%{opacity:0.7;box-shadow:0 0 5px #FFFF00}100%{opacity:1;box-shadow:0 0 10px #FFFF00}} .as-token-counter{position:fixed;top:20px;left:20px;font-family:Arial,sans-serif;font-size:24px;font-weight:bold;color:#FFD700;text-shadow:2px 2px 2px rgba(0,0,0,0.5);z-index:10002;pointer-events:none} .as-shop{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:300px;background-color:rgba(0,0,0,0.8);border:2px solid #FFD700;border-radius:10px;padding:15px;z-index:10003;display:none;color:white;font-family:Arial,sans-serif} .as-shop-title{text-align:center;margin-bottom:20px;color:#FFD700;font-size:24px} .as-shop-item{margin-bottom:15px;padding:10px;border:1px solid #555;border-radius:5px;transition:background-color 0.3s} .as-shop-item:hover{background-color:rgba(255,215,0,0.1)} .as-shop-item-name{font-weight:bold;color:#FFD700} .as-shop-item-cost{float:right;color:#FFD700} .as-shop-item-desc{font-size:12px;margin-top:5px;color:#ccc} .as-shop-btn{display:block;width:100%;padding:8px;margin-top:10px;background-color:#FFD700;border:none;border-radius:5px;color:#000;font-weight:bold;cursor:pointer} .as-shop-btn:disabled{background-color:#555;color:#888;cursor:not-allowed} .as-shop-close{text-align:center;margin-top:15px} .as-token-gained{position:fixed;color:#FFD700;font-weight:bold;pointer-events:none;animation:token-gained 1s forwards}@keyframes token-gained{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-20px)}} .as-boost-trail{position:fixed;border-radius:50%;pointer-events:none;z-index:9996;background:radial-gradient(circle, rgba(255,165,0,0.7) 0%, rgba(255,69,0,0.5) 50%, rgba(255,0,0,0) 100%);animation:boost-fade 0.5s forwards}@keyframes boost-fade{0%{opacity:0.7;transform:scale(1)}100%{opacity:0;transform:scale(0.3)}}';document.head.appendChild(s);var c=document.createElement('canvas');c.id='as-game';document.body.appendChild(c);function r(){c.width=window.innerWidth;c.height=window.innerHeight}r();window.addEventListener('resize',r);var x=c.getContext('2d');var p={x:c.width/2,y:c.height-50,w:30,h:30,vx:0,vy:0,maxSpeed:4,boostMaxSpeed:25,thrust:0.08,drag:0.98,angle:0,rotSpeed:0.04,acceleration:0,maxAcceleration:5.0,forwardPressed:!1,forwardPressTime:0,boostLevel:0};var tokens=[];var tokenCount=0;var chargingEnabled=!1;var speedUpgradeEnabled=!1;var upgrades={charging:{name:'Charging Beam',cost:5,description:'Hold SPACE to charge your shots for more power',purchased:!1},speed:{name:'Speed Booster',cost:10,description:'Hold UP to gradually increase your speed',purchased:!1}};var shopOpen=!1;var lasers=[];var k={};var charging=!1;var chargeStartTime=0;var chargeLevel=0;var maxChargeTime=3000;var chargeIndicator=null;var rainbowInterval=null;function getTextNodesIn(el){var textNodes=[];if(el.nodeType==3){textNodes.push(el)}else{var children=el.childNodes;for(var j=0;j<children.length;j++){textNodes.push.apply(textNodes,getTextNodesIn(children[j]))}}return textNodes}function getRect(element){if(typeof element.getBoundingClientRect==='function'){var rect=element.getBoundingClientRect();return{width:rect.width,height:rect.height,left:rect.left,top:rect.top}}var rect={width:element.offsetWidth,height:element.offsetHeight,left:0,top:0};var el=element;while(el){rect.left+=el.offsetLeft;rect.top+=el.offsetTop;el=el.offsetParent}return rect}function createSplitContainers(element){var coords=getRect(element);var leftContainer=document.createElement('div');leftContainer.className='as-split-container as-split-left';leftContainer.style.left=coords.left+'px';leftContainer.style.top=coords.top+'px';leftContainer.style.width=(coords.width*0.5)+'px';leftContainer.style.height=coords.height+'px';var rightContainer=document.createElement('div');rightContainer.className='as-split-container as-split-right';rightContainer.style.left=(coords.left+coords.width/2)+'px';rightContainer.style.top=coords.top+'px';rightContainer.style.width=(coords.width*0.5)+'px';rightContainer.style.height=coords.height+'px';var leftClone=element.cloneNode(!0);var rightClone=element.cloneNode(!0);var cloneStyles={margin:0,overflow:'hidden'};for(var prop in cloneStyles){leftClone.style[prop]=cloneStyles[prop];rightClone.style[prop]=cloneStyles[prop]}leftContainer.appendChild(leftClone);rightContainer.appendChild(rightClone);rightContainer.scrollLeft=coords.width/2;document.body.appendChild(leftContainer);document.body.appendChild(rightContainer);setTimeout(function(){leftContainer.style.transform='rotate(-'+random(30,50)+'deg) translate(-100px, 40px)';leftContainer.style.opacity='0';rightContainer.style.transform='rotate('+random(30,50)+'deg) translate(100px, 40px)';rightContainer.style.opacity='0'},10);setTimeout(function(){if(leftContainer.parentNode)leftContainer.parentNode.removeChild(leftContainer);if(rightContainer.parentNode)rightContainer.parentNode.removeChild(rightContainer)},1000);element.style.opacity='0';element.style.visibility='hidden';element.classList.add('as-destroyed');return[leftContainer,rightContainer]}function random(min,max){return Math.floor(Math.random()*(max-min+1)+min)}function processHitElement(el){if(!el||el.id==='as-game'||el===document.body||el===document.documentElement||el.contains(c)||el.classList.contains('as-destroyed')||el.classList.contains('as-laser')||el.classList.contains('as-laser-impact')||el.classList.contains('charge-indicator')){return!1}if(el.tagName==='SCRIPT'||el.tagName==='STYLE'||el.tagName==='META'||el.tagName==='HEAD'||el.tagName==='TITLE'){return!1}if(el.nodeType===3||(el.childNodes&&el.childNodes.length>0)){var textNodes=getTextNodesIn(el);if(textNodes.length>0){var validTextNodes=[];for(var t=0;t<textNodes.length;t++){if(textNodes[t].nodeValue&&textNodes[t].nodeValue.trim().length>1){validTextNodes.push(textNodes[t])}}if(validTextNodes.length>0){var textNode=validTextNodes[Math.floor(Math.random()*validTextNodes.length)];var parent=textNode.parentNode;var text=textNode.nodeValue;if(text&&text.length>1){var splitIndex=Math.floor(text.length/2);var firstHalf=text.substring(0,splitIndex);var secondHalf=text.substring(splitIndex);textNode.nodeValue=firstHalf;var span=document.createElement('span');span.appendChild(document.createTextNode(secondHalf));span.classList.add('as-destroyed');if(parent){parent.insertBefore(span,textNode.nextSibling)}return!0}else{el.classList.add('as-destroyed');return!0}}else{createSplitContainers(el);return!0}}else{createSplitContainers(el);return!0}}else{createSplitContainers(el);return!0}return!1}function createImpactEffect(x,y,size=1){var impact=document.createElement('div');impact.className='as-laser-impact';impact.style.left=(x-(10*size))+'px';impact.style.top=(y-(10*size))+'px';impact.style.width=(20*size)+'px';impact.style.height=(20*size)+'px';document.body.appendChild(impact);setTimeout(function(){if(impact.parentNode){impact.parentNode.removeChild(impact)}},300);}function createKnockbackEffect(x,y,chargeLevel){var knockbackEffect=document.createElement('div');knockbackEffect.className='as-laser-impact';var size=30+(chargeLevel*120);knockbackEffect.style.left=(x-size/2)+'px';knockbackEffect.style.top=(y-size/2)+'px';knockbackEffect.style.width=size+'px';knockbackEffect.style.height=size+'px';if(chargeLevel>=0.95){knockbackEffect.style.background='radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,0,0,0.5) 30%, rgba(255,165,0,0.5) 45%, rgba(255,255,0,0.5) 60%, rgba(0,255,0,0.3) 75%, rgba(0,0,255,0) 100%)'}else{const color=getChargeColor(chargeLevel);const rgbMatch=color.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(rgbMatch){const r=rgbMatch[1];const g=rgbMatch[2];const b=rgbMatch[3];knockbackEffect.style.background='radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba('+r+','+g+','+b+',0.7) 40%, rgba('+r+','+g+','+b+',0.5) 70%, rgba('+r+','+g+','+b+',0) 100%)'}else{knockbackEffect.style.background='radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,165,0,0.7) 40%, rgba(255,69,0,0.5) 70%, rgba(255,0,0,0) 100%)'}}knockbackEffect.style.animation='impact 0.5s forwards';document.body.appendChild(knockbackEffect);setTimeout(function(){if(knockbackEffect.parentNode){knockbackEffect.parentNode.removeChild(knockbackEffect)}},500);}var enemies=[];var lastEnemySpawn=0;var enemySpawnRate=5000;var enemySpeed=1.5;var enemyShootRate=3000;function createEnemy(){var side=Math.floor(Math.random()*4);var x,y;switch(side){case 0:x=Math.random()*c.width;y=-30;break;case 1:x=c.width+30;y=Math.random()*c.height;break;case 2:x=Math.random()*c.width;y=c.height+30;break;case 3:x=-30;y=Math.random()*c.height;break;}var enemy={x:x,y:y,w:25,h:25,vx:0,vy:0,health:2,lastShot:0,element:document.createElement('div'),tokenValue:Math.floor(Math.random()*2)+1};var dx=p.x-enemy.x;var dy=p.y-enemy.y;var dist=Math.sqrt(dx*dx+dy*dy);enemy.vx=(dx/dist)*enemySpeed;enemy.vy=(dy/dist)*enemySpeed;enemy.element.className='as-enemy';enemy.element.style.position='fixed';enemy.element.style.left=enemy.x+'px';enemy.element.style.top=enemy.y+'px';enemy.element.style.width=enemy.w+'px';enemy.element.style.height=enemy.h+'px';enemy.element.style.backgroundColor='#e74c3c';enemy.element.style.borderRadius='50%';enemy.element.style.boxShadow='0 0 10px #ff0000';enemy.element.style.zIndex='9997';enemy.element.style.pointerEvents='none';document.body.appendChild(enemy.element);enemies.push(enemy);}function createToken(x,y,value){var token={x:x,y:y,value:value,element:document.createElement('div'),createdAt:performance.now()};token.element.className='as-token';token.element.style.left=x+'px';token.element.style.top=y+'px';document.body.appendChild(token.element);tokens.push(token);var valueText=document.createElement('div');valueText.className='as-token-gained';valueText.textContent='+'+value;valueText.style.left=(x+15)+'px';valueText.style.top=(y-10)+'px';document.body.appendChild(valueText);setTimeout(function(){if(valueText.parentNode){valueText.parentNode.removeChild(valueText);}},1000);}function setupTokenCounter(){var counter=document.createElement('div');counter.className='as-token-counter';counter.id='as-token-counter';counter.textContent='Tokens: 0';document.body.appendChild(counter);}function updateTokenCounter(){var counter=document.getElementById('as-token-counter');if(counter){counter.textContent='Tokens: '+tokenCount;}}function setupShop(){var shop=document.createElement('div');shop.className='as-shop';shop.id='as-shop';shop.innerHTML='<div class=\'as-shop-title\'>UPGRADES</div><div class=\'as-shop-item\' id=\'upgrade-charging\'><span class=\'as-shop-item-name\'>Charging Beam</span><span class=\'as-shop-item-cost\'>5</span><div class=\'as-shop-item-desc\'>Hold SPACE to charge your shots for more power</div><button class=\'as-shop-btn\' id=\'buy-charging\' disabled>BUY</button></div><div class=\'as-shop-item\' id=\'upgrade-speed\'><span class=\'as-shop-item-name\'>Speed Booster</span><span class=\'as-shop-item-cost\'>10</span><div class=\'as-shop-item-desc\'>Hold UP to gradually increase your speed</div><button class=\'as-shop-btn\' id=\'buy-speed\' disabled>BUY</button></div><div class=\'as-shop-close\'>Press B to close</div>';document.body.appendChild(shop);document.getElementById('buy-charging').addEventListener('click',function(){purchaseUpgrade('charging');});document.getElementById('buy-speed').addEventListener('click',function(){purchaseUpgrade('speed');});}function toggleShop(){var shop=document.getElementById('as-shop');if(shop){if(shopOpen){shop.style.display='none';shopOpen=!1;}else{updateShopButtons();shop.style.display='block';shopOpen=!0;}}}function updateShopButtons(){for(var key in upgrades){var button=document.getElementById('buy-'+key);if(button){if(upgrades[key].purchased){button.textContent='PURCHASED';button.disabled=!0;}else if(tokenCount>=upgrades[key].cost){button.disabled=!1;}else{button.disabled=!0;}}}}function purchaseUpgrade(upgradeKey){var upgrade=upgrades[upgradeKey];if(upgrade&&!upgrade.purchased&&tokenCount>=upgrade.cost){tokenCount-=upgrade.cost;updateTokenCounter();upgrade.purchased=!0;if(upgradeKey==='charging'){chargingEnabled=!0;}else if(upgradeKey==='speed'){speedUpgradeEnabled=!0;}updateShopButtons();}}function enemyShoot(enemy){var dx=p.x-enemy.x;var dy=p.y-enemy.y;var angle=Math.atan2(dy,dx)*180/Math.PI+90;var radAngle=(angle-90)*Math.PI/180;var tipX=enemy.x+Math.cos(radAngle)*(enemy.h/2);var tipY=enemy.y+Math.sin(radAngle)*(enemy.h/2);var laser={startX:tipX,startY:tipY,angle:angle,element:document.createElement('div'),length:0,maxLength:5000,growing:!0,speed:1500,createdAt:performance.now(),hits:[],damage:1,isEnemy:!0};laser.element.className='as-laser enemy-laser';laser.element.style.left=laser.startX+'px';laser.element.style.top=laser.startY+'px';laser.element.style.width='3px';laser.element.style.height='0px';laser.element.style.background='#e74c3c';laser.element.style.boxShadow='0 0 8px #ff0000';laser.element.style.transform='rotate('+(laser.angle+180)+'deg)';document.body.appendChild(laser.element);lasers.push(laser);enemy.lastShot=performance.now();}function updateEnemies(timestamp){if(timestamp-lastEnemySpawn>enemySpawnRate){createEnemy();lastEnemySpawn=timestamp;}for(var i=0;i<enemies.length;i++){var enemy=enemies[i];if(Math.random()<0.05){var dx=p.x-enemy.x;var dy=p.y-enemy.y;var dist=Math.sqrt(dx*dx+dy*dy);enemy.vx=(dx/dist)*enemySpeed;enemy.vy=(dy/dist)*enemySpeed;}if(Math.random()<0.1){enemy.vx+=(Math.random()-0.5)*0.5;enemy.vy+=(Math.random()-0.5)*0.5;}enemy.x+=enemy.vx;enemy.y+=enemy.vy;enemy.element.style.left=enemy.x+'px';enemy.element.style.top=enemy.y+'px';if(enemy.x<-100||enemy.x>c.width+100||enemy.y<-100||enemy.y>c.height+100){if(enemy.element.parentNode){enemy.element.parentNode.removeChild(enemy.element);}enemies.splice(i,1);i--;continue;}if(timestamp-enemy.lastShot>enemyShootRate){enemyShoot(enemy);}var playerDist=Math.sqrt(Math.pow(p.x-enemy.x,2)+Math.pow(p.y-enemy.y,2));if(playerDist<(p.w/2+enemy.w/2)){createToken(enemy.x,enemy.y,enemy.tokenValue);tokenCount+=enemy.tokenValue;updateTokenCounter();if(enemy.element.parentNode){enemy.element.parentNode.removeChild(enemy.element);}enemies.splice(i,1);i--;var knockbackForce=3;var dx=p.x-enemy.x;var dy=p.y-enemy.y;var dist=Math.sqrt(dx*dx+dy*dy);p.vx+=(dx/dist)*knockbackForce;p.vy+=(dy/dist)*knockbackForce;createImpactEffect((p.x+enemy.x)/2,(p.y+enemy.y)/2,2);}}updateTokens(timestamp);}function updateTokens(timestamp){for(var i=0;i<tokens.length;i++){var token=tokens[i];var playerDist=Math.sqrt(Math.pow(p.x-token.x,2)+Math.pow(p.y-token.y,2));if(playerDist<(p.w/2+15)){if(token.element.parentNode){token.element.parentNode.removeChild(token.element);}tokenCount+=token.value;updateTokenCounter();if(shopOpen){updateShopButtons();}tokens.splice(i,1);i--;continue;}if(timestamp-token.createdAt>10000){if(token.element.parentNode){token.element.parentNode.removeChild(token.element);}tokens.splice(i,1);i--;}}}function fireLaser(chargeLevel=0){var radAngle=(p.angle-90)*Math.PI/180;var tipX=p.x+Math.cos(radAngle)*(p.h/2);var tipY=p.y+Math.sin(radAngle)*(p.h/2);var width=3+(chargeLevel*27);var maxLength=15000+(chargeLevel*15000);var speed=2000+(chargeLevel*1500);var laser={startX:tipX,startY:tipY,angle:p.angle,element:document.createElement('div'),length:0,maxLength:maxLength,growing:!0,speed:speed,createdAt:performance.now(),hits:[],chargeLevel:chargeLevel,damage:1+(chargeLevel*4),isEnemy:!1};laser.element.className=chargeLevel>0.2?'as-laser charged-laser':'as-laser';laser.element.style.left=laser.startX+'px';laser.element.style.top=laser.startY+'px';laser.element.style.width=width+'px';laser.element.style.height='0px';laser.element.style.transform='rotate('+(laser.angle+180)+'deg)';laser.element.style.background='#ff5555';if(chargeLevel>0.2){const glowSize=8+(chargeLevel*22);laser.element.style.boxShadow='0 0 '+glowSize+'px #ff0000';}document.body.appendChild(laser.element);lasers.push(laser);if(chargeIndicator&&chargeIndicator.parentNode){chargeIndicator.parentNode.removeChild(chargeIndicator);chargeIndicator=null;}return laser;}function updateLasers(tdelta){for(var i=0;i<lasers.length;i++){var laser=lasers[i];var now=performance.now();var elapsed=(now-laser.createdAt)/1000;if(laser.growing){laser.length=Math.min(laser.speed*elapsed,laser.maxLength);laser.element.style.height=laser.length+'px';checkLaserCollisions(laser);if(laser.length>=laser.maxLength||elapsed>0.2){laser.growing=!1}}else{laser.element.style.opacity=Math.max(0,1-(elapsed-0.2)*5);if(elapsed>0.4){if(laser.element.parentNode){laser.element.parentNode.removeChild(laser.element)}lasers.splice(i,1);i--}}}}function checkLaserCollisions(laser){var radAngle=(laser.angle-90)*Math.PI/180;var checkPoints=10;var step=laser.length/checkPoints;for(var i=0;i<checkPoints;i++){var distance=i*step;var checkX=laser.startX+Math.cos(radAngle)*distance;var checkY=laser.startY+Math.sin(radAngle)*distance;if(checkX<0||checkX>window.innerWidth||checkY<0||checkY>window.innerHeight){continue}if(!laser.isEnemy){for(var e=0;e<enemies.length;e++){var enemy=enemies[e];var dist=Math.sqrt(Math.pow(checkX-enemy.x,2)+Math.pow(checkY-enemy.y,2));if(dist<enemy.w/2){createImpactEffect(checkX,checkY,1.5);enemy.health-=laser.damage;if(enemy.health<=0){createToken(enemy.x,enemy.y,enemy.tokenValue);tokenCount+=enemy.tokenValue;updateTokenCounter();if(enemy.element.parentNode){enemy.element.parentNode.removeChild(enemy.element);}enemies.splice(e,1);if(shopOpen){updateShopButtons();}}return;}}}if(laser.isEnemy){var dist=Math.sqrt(Math.pow(checkX-p.x,2)+Math.pow(checkY-p.y,2));if(dist<p.w/2){createImpactEffect(checkX,checkY,1.5);var knockbackForce=4;p.vx+=Math.cos(radAngle)*knockbackForce;p.vy+=Math.sin(radAngle)*knockbackForce;return;}}var el=document.elementFromPoint(checkX,checkY);if(el&&!laser.hits.includes(el)&&el.id!=='as-game'&&el!==document.body&&el!==document.documentElement&&!el.contains(c)&&!el.classList.contains('as-destroyed')&&!el.classList.contains('as-laser')&&!el.classList.contains('as-laser-impact')&&!el.classList.contains('charge-indicator')&&!el.classList.contains('as-enemy')){laser.hits.push(el);if(processHitElement(el)){createImpactEffect(checkX,checkY,1+laser.chargeLevel);}}}}document.addEventListener('keydown',function(e){k[e.key]=!0;if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].indexOf(e.key)>=0)e.preventDefault();if(e.key===' '&&!charging&&!k.cd&&chargingEnabled){charging=!0;chargeStartTime=performance.now();var radAngle=(p.angle-90)*Math.PI/180;var tipX=p.x+Math.cos(radAngle)*(p.h/2);var tipY=p.y+Math.sin(radAngle)*(p.h/2);chargeIndicator=document.createElement('div');chargeIndicator.className='charge-indicator';chargeIndicator.style.left=(tipX-15)+'px';chargeIndicator.style.top=(tipY-15)+'px';chargeIndicator.style.width='30px';chargeIndicator.style.height='30px';chargeIndicator.style.background='radial-gradient(circle, rgba(255,255,255,0.7) 0%, rgba(0,0,255,0.5) 70%, rgba(0,0,255,0) 100%)';document.body.appendChild(chargeIndicator);}if(e.key==='b'||e.key==='B'){toggleShop();}});document.addEventListener('keyup',function(e){k[e.key]=!1;if(e.key===' '&&charging){var chargeDuration=performance.now()-chargeStartTime;chargeLevel=Math.min(1,chargeDuration/maxChargeTime);fireLaser(chargeLevel);var knockbackForce=0.5+(chargeLevel*9.5);var radAngle=(p.angle-90)*Math.PI/180;p.vx-=Math.cos(radAngle)*knockbackForce;p.vy-=Math.sin(radAngle)*knockbackForce;createKnockbackEffect(p.x,p.y,chargeLevel);charging=!1;k.cd=!0;setTimeout(function(){k.cd=!1;},250+Math.floor(chargeLevel*750));}else if(e.key===' '&&!chargingEnabled){fireLaser(0);k.cd=!0;setTimeout(function(){k.cd=!1;},250);}});function u(timestamp){var tdelta=(timestamp-lastTimestamp)/1000;lastTimestamp=timestamp;if(isNaN(tdelta)||tdelta>0.1)tdelta=0.016;x.clearRect(0,0,c.width,c.height);if(k.ArrowLeft)p.angle-=p.rotSpeed*180/Math.PI;if(k.ArrowRight)p.angle+=p.rotSpeed*180/Math.PI;var radAngle=(p.angle-90)*Math.PI/180;if(k.ArrowUp){p.vx+=Math.cos(radAngle)*p.thrust;p.vy+=Math.sin(radAngle)*p.thrust;if(speedUpgradeEnabled){if(!p.forwardPressed){p.forwardPressed=!0;p.forwardPressTime=performance.now();p.boostLevel=0;}else{var pressTime=(performance.now()-p.forwardPressTime)/1000;p.acceleration=Math.min(p.maxAcceleration,0.02*Math.pow(3,Math.min(5,pressTime)));p.boostLevel=Math.min(1,p.acceleration/p.maxAcceleration);p.vx+=Math.cos(radAngle)*p.acceleration;p.vy+=Math.sin(radAngle)*p.acceleration;}}}else if(p.forwardPressed){p.forwardPressed=!1;p.acceleration=0;p.boostLevel=0;}if(k.ArrowDown){p.vx-=Math.cos(radAngle)*p.thrust;p.vy-=Math.sin(radAngle)*p.thrust}var speed=Math.sqrt(p.vx*p.vx+p.vy*p.vy);var speedLimit=(speedUpgradeEnabled&&p.forwardPressed)?p.maxSpeed+(p.boostMaxSpeed-p.maxSpeed)*p.boostLevel:p.maxSpeed;if(speed>speedLimit){var factor=speedLimit/speed;p.vx*=factor;p.vy*=factor}p.vx*=p.drag;p.vy*=p.drag;p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=c.width;if(p.x>c.width)p.x=0;if(p.y<0)p.y=c.height;if(p.y>c.height)p.y=0;if(charging&&chargeIndicator){var newChargeTime=performance.now()-chargeStartTime;chargeLevel=Math.min(1,newChargeTime/maxChargeTime);var tipX=p.x+Math.cos(radAngle)*(p.h/2);var tipY=p.y+Math.sin(radAngle)*(p.h/2);var size=30+(chargeLevel*100);chargeIndicator.style.left=(tipX-(size/2))+'px';chargeIndicator.style.top=(tipY-(size/2))+'px';chargeIndicator.style.width=size+'px';chargeIndicator.style.height=size+'px';if(chargeLevel>=0.95){if(!chargeIndicator.classList.contains('rainbow-charge')){chargeIndicator.classList.add('rainbow-charge');}}else{if(chargeIndicator.classList.contains('rainbow-charge')){chargeIndicator.classList.remove('rainbow-charge');}const color=getChargeColor(chargeLevel);const rgbMatch=color.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(rgbMatch){const r=rgbMatch[1];const g=rgbMatch[2];const b=rgbMatch[3];chargeIndicator.style.background='radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba('+r+','+g+','+b+',0.6) 70%, rgba('+r+','+g+','+b+',0) 100%)'}}}updateLasers(tdelta);updateEnemies(timestamp);x.save();x.translate(p.x,p.y);x.rotate(radAngle);if(charging){var glowSize=p.w*(0.5+chargeLevel*1.5);var gradient;if(chargeLevel>=0.95){gradient=x.createRadialGradient(0,0,p.w/3,0,0,glowSize);gradient.addColorStop(0,'rgba(255, 255, 255, 0.7)');gradient.addColorStop(0.2,'rgba(255, 0, 0, 0.5)');gradient.addColorStop(0.35,'rgba(255, 165, 0, 0.5)');gradient.addColorStop(0.5,'rgba(255, 255, 0, 0.5)');gradient.addColorStop(0.65,'rgba(0, 255, 0, 0.5)');gradient.addColorStop(0.8,'rgba(0, 0, 255, 0.5)');gradient.addColorStop(1,'rgba(143, 0, 255, 0)')}else{const color=getChargeColor(chargeLevel);const rgbMatch=color.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(rgbMatch){const r=rgbMatch[1];const g=rgbMatch[2];const b=rgbMatch[3];gradient=x.createRadialGradient(0,0,p.w/3,0,0,glowSize);gradient.addColorStop(0,'rgba(255, 255, 255, '+(0.3+chargeLevel*0.4)+')');gradient.addColorStop(0.6,'rgba('+r+', '+g+', '+b+', '+(0.3+chargeLevel*0.3)+')');gradient.addColorStop(1,'rgba('+r+', '+g+', '+b+', 0)')}else{gradient=x.createRadialGradient(0,0,p.w/3,0,0,glowSize);gradient.addColorStop(0,'rgba(255, '+Math.floor(255-chargeLevel*255)+', '+Math.floor(100-chargeLevel*100)+', '+(0.3+chargeLevel*0.4)+')');gradient.addColorStop(1,'rgba(255, 0, 0, 0)')}}x.fillStyle=gradient;x.beginPath();x.arc(0,0,glowSize,0,Math.PI*2);x.fill();}if(speedUpgradeEnabled&&p.forwardPressed&&p.boostLevel>0.1){x.fillStyle='rgba(255, '+Math.floor(165-p.boostLevel*165)+', 0, '+(0.3+p.boostLevel*0.5)+')';x.beginPath();x.moveTo(-p.w/2,-p.h/2-5);x.lineTo(-p.w/2-(15+p.boostLevel*25),0);x.lineTo(-p.w/2,p.h/2+5);x.closePath();x.fill();if(Math.random()<0.3+p.boostLevel*0.6){var trailX=p.x-Math.cos(radAngle)*(p.h/2+10+Math.random()*10);var trailY=p.y-Math.sin(radAngle)*(p.h/2+10+Math.random()*10);var size=10+Math.random()*10+p.boostLevel*20;var opacity=0.3+Math.random()*0.4+p.boostLevel*0.2;createBoostTrail(trailX,trailY,size,opacity);}}x.fillStyle='#3498db';x.beginPath();x.moveTo(p.w/2,0);x.lineTo(-p.w/2,-p.h/2);x.lineTo(-p.w/2,p.h/2);x.closePath();x.fill();if(k.ArrowUp){x.fillStyle='#e74c3c';x.beginPath();x.moveTo(-p.w/2,-5);x.lineTo(-p.w/2-10,0);x.lineTo(-p.w/2,5);x.closePath();x.fill()}x.restore();for(var i=0;i<enemies.length;i++){var enemy=enemies[i];x.save();x.translate(enemy.x,enemy.y);x.fillStyle='#e74c3c';x.beginPath();x.arc(0,0,enemy.w/2,0,Math.PI*2);x.fill();x.restore();}}function initGameUI(){setupTokenCounter();setupShop();}var lastTimestamp=0;function gameLoop(timestamp){u(timestamp);requestAnimationFrame(gameLoop)}initGameUI();requestAnimationFrame(gameLoop);console.log('Enhanced Asteroid Shooter started! Use Left/Right arrows to rotate, Up/Down for thrust, Space to shoot, B to open shop! Destroy enemies to earn tokens!')})();">
                    Astroid Shooter</a>
            </li>
            <li>Besuche eine beliebige Webseite</li>
            <li>Klicke auf das Lesezeichen "Asteroid Shooter" in deiner Lesezeichenleiste</li>
        </ol>
    </div>

    <h2>Verbesserte Spielsteuerung:</h2>
    <ul>
        <li><strong>Pfeiltasten Links/Rechts:</strong> Raumschiff rotieren</li>
        <li><strong>Pfeiltasten Hoch/Runter:</strong> Vorwärts/Rückwärts Schub geben</li>
        <li><strong>Leertaste:</strong> Schießen</li>
        <li>Ziele auf Elemente der Webseite, um sie zu zerstören (auszublenden)</li>
    </ul>

    <div class="warning">
        <h3>Hinweise:</h3>
        <ul>
            <li>Manche Webseiten blockieren Bookmarklets aufgrund von Sicherheitseinstellungen</li>
            <li>Um das Spiel zu beenden, lade die Seite neu (F5)</li>
            <li>Du musst möglicherweise zuerst auf die Webseite klicken, damit die Tastensteuerung funktioniert</li>
        </ul>
    </div>

    <h2>Neue Funktionen:</h2>
    <ul>
        <li><strong>Langsamere Beschleunigung:</strong> Es dauert länger, bis das Raumschiff seine maximale
            Geschwindigkeit erreicht</li>
        <li><strong>Bessere Laser:</strong> Die Laser sind größer, röter und fliegen weiter (15000 Pixel)</li>
        <li><strong>Intelligentere Text-Zerstörung:</strong> Das Spiel kann jetzt einzelne Textelemente und Wörter
            gezielter zerstören</li>
        <li><strong>Korrekte Ausrichtung:</strong> Das Raumschiff zeigt in die richtige Richtung</li>
        <li><strong>Wrap-Around:</strong> Das Raumschiff erscheint auf der anderen Seite, wenn es den Bildschirmrand
            verlässt</li>
    </ul>

    <p>Viel Spaß beim Spielen!</p>

    <script>

    </script>
</body>

</html>